@use "~scss/helpers";
@use "~scss/helpers/functions";
@use "~scss/helpers/mixins";
@use "~scss/resources";
@use "~scss/resources/effects";
@use "~scss/resources/breakpoints";
@use "~scss/stylesheets";
@use "~scss/stylesheets/form";

.book-player {
    --page-per-view: 2;

    --total-pages: 10;
    --current-page: 1;
    --progress: calc((var(--current-page) - 1) / (var(--total-pages) - 1) * 100%);
}

.book-player {
    cursor: crosshair;
    user-select: none;
    -webkit-tap-highlight-color: transparent;

    position: relative;
    display: inline-block;

    > .page {
        display: inline-block;

        width: inherit;
        height: inherit;
        min-width: inherit;
        max-width: inherit;
        min-height: inherit;
        max-height: inherit;

        > img {
            display: inline-block;

            width: inherit;
            height: inherit;

            min-width: inherit;
            max-width: inherit;
            min-height: inherit;
            max-height: inherit;

            text-align: center;
        }
    }
}

.book-player .page-turn {
    @mixin side($measure) {
        @include mixins.custom-selector(".next") {
            right: #{$measure};
        }
        @include mixins.custom-selector(".last") {
            left: #{$measure};
        }
    }

    & {
        user-select:none;
        pointer-events: none;
        -webkit-tap-highlight-color: transparent;

        position: absolute;
        
        top: 0;

        width: calc(100% / var(--page-per-view));
        height: 100%;

        @include side(0);

        > * {
            position: absolute;
    
            top: 50%;
    
            @include side(0);
    
            transform: translateY(-50%);
    
            &.zone {
                top:0;

                width: var(--page-zone-width);
                height: 100%;

                transform: none;

            }
    
            &.background {
                width: var(--page-area-width);
                height: 100%;

                @include mixins.custom-selector(".next") {
                    background-image: linear-gradient(to left, var(--area), transparent);
                }
                @include mixins.custom-selector(".last") {
                    background-image: linear-gradient(to right, var(--area), transparent);
                }

                opacity: 0;
            
                transition: var(--area-anim);
            }
    
            &.active {
                width: 100%;
                height: 100%;
    
                background-color: transparent;
            }
    
            &.arrow {
                width: 20px;
            
                @include effects.drop-out(true);
                opacity: 0;
            
                transform: translateY(-50%);
            
                transition: opacity 80ms linear, left 120ms ease, right  120ms ease;
            }
        }
    }
    @include mixins.hover-mobile {
        > * {
            &.zone {
                height: calc(100% - 2em);
                // height: calc(100% - 1rem);
            }
        }
    }

    &.-hover {
        pointer-events: all;

        cursor: pointer;

        > * {
            &.background {
                opacity: 1;
    
                transition: none;
            }
    
            &.arrow {
                opacity: 0.5;
    
                transition: opacity 60ms linear, left 120ms ease, right  120ms ease;
    
                @include side(var(--page-arrow-distance));
            }
        }
    }
    &.-active {
        > * {
            &.background {
                opacity: 0;
            }
    
            &.active {
                @include mixins.custom-selector(".next") {
                    background-image: linear-gradient(to right, var(--page-turn), transparent);
                }
                @include mixins.custom-selector(".last") {
                    background-image: linear-gradient(to left, var(--page-turn), transparent);
                }
            }
    
            &.arrow {
                opacity: 1;
            }
        }
    }
}
