{"version":3,"sources":["js/index.js"],"names":["addGlobalEventListener","type","selector","callback","options","document","addEventListener","e","target","matches","startEventListener","startResize","window","mouseHover","element","event","rect","getBoundingClientRect","clientX","left","right","clientY","top","bottom","overflowX","scrollWidth","clientWidth","overflowY","scrollHeight","clientHeight","overflow","getMetaImg","url","img","Image","src","onload","width","height","initial","console","log","querySelectorAll","forEach","elem","i","arr","closest","classList","toggle","querySelector","style","setProperty","pages","value","min","max","Math","scrollX","scrollY","once","checked","updatePages","bookPlayer","parseInt","getComputedStyle","getPropertyValue","innerText","offsetWidth","contains","lift","setTimeout","clearTimeout","add","remove"],"mappings":"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","file":"js.ef9ab0ea.js","sourceRoot":"..\\src","sourcesContent":["// import pages from \"../books/The Cat in the Hat/*.png\"; \r\n// import pages from \"../../books\";\r\n\r\nfunction addGlobalEventListener(type, selector, callback, options) {\r\n    document.addEventListener(type, e => {\r\n        if (e.target.matches(selector)) {\r\n            callback(e);\r\n        }\r\n    }, options);\r\n}\r\nfunction startEventListener(type, selector, callback, options){\r\n    document.addEventListener(\"DOMContentLoaded\", e => callback(e));\r\n    addGlobalEventListener(type, selector, e => callback(e), options);\r\n}\r\nfunction startResize(callback, options) {\r\n    document.addEventListener(\"DOMContentLoaded\", e => callback(e));\r\n    window.addEventListener(\"resize\",  e => callback(e), options);\r\n}\r\n\r\nfunction mouseHover(element, event){\r\n    let rect = element.getBoundingClientRect();\r\n\r\n    return (\r\n        event.clientX >= rect.left && event.clientX <= rect.right &&\r\n        event.clientY >= rect.top && event.clientY <= rect.bottom\r\n    );\r\n}\r\n\r\nfunction overflowX(element) {\r\n    return element.scrollWidth > element.clientWidth;\r\n}\r\nfunction overflowY(element) {\r\n    return element.scrollHeight > element.clientHeight;\r\n}\r\nfunction overflow(element) {\r\n    return overflowX(element) || overflowY(element);\r\n}\r\n\r\nfunction getMetaImg(url, callback) {\r\n    const img = new Image();\r\n    img.src = url;\r\n    img.onload = function() { callback(this.width, this.height); }\r\n}\r\n// getMetaImg(\"http://snook.ca/files/mootools_83_snookca.png\", (width, height) => { alert(width + 'px ' + height + 'px') });\r\n\r\n\r\n\r\ninitial = (() => {\r\n    console.log(\"initial load\");\r\n\r\n    { //helpers\r\n        //min/max area\r\n        addGlobalEventListener(\"load\", \".-live-area\", e => {\r\n            // boxes.forEach(box => {\r\n            //     new ResizeObserver(entries => {\r\n            //         const width = Math.floor(entries[0].contentRect.width);\r\n            //         const height = Math.floor(entries[0].contentRect.height);\r\n            //         entries[0].target.value = `I'm ${width}px and ${height}px tall`;\r\n            //     }).observe(box);\r\n            // });\r\n        });\r\n\r\n        // areaObserver = new ResizeObserver(entries => {\r\n\r\n        // });\r\n        // areaObserver.observe()\r\n        // window.addEventListener('storage', e => {\r\n        //     console.log(\"storage\");\r\n\r\n        //     document.querySelectorAll(\".-live-area\").forEach((area, index, array) => {\r\n\r\n        //     });\r\n        // });\r\n\r\n        //range update fill\r\n        addGlobalEventListener(\"load\", \"input[type='range']\", e => {\r\n\r\n        });\r\n    }\r\n    { //page\r\n        //book info drawer layout\r\n        startResize(e => {\r\n            document.querySelectorAll(\".book-player-info .info > .drawer\").forEach((elem, i, arr) => {\r\n                elem.closest(\".book-player-info\").classList.toggle(\"-overflow\", overflowY(elem.closest(\".book-player-info\").querySelector(\".info > .description\")));\r\n                elem.closest(\".book-player-info\").style.setProperty(\"--min-info-desc\", elem.closest(\".book-player-info\").querySelector(\".info > .description\").scrollHeight + \"px\");\r\n            });\r\n        });\r\n    }\r\n})();\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", (event) => {\r\n    console.log(\"document load\");\r\n\r\n    // elem = document.createElement(\"span\");\r\n    // elem.classList.add(\"-live-area\");\r\n    // elem.innerText = \"new\";\r\n    // document.querySelector(\"body\").append(elem);\r\n\r\n\r\n    let pages = [\r\n        \"THE-CAT-IN-THE-HAT-03\",\r\n        \"THE-CAT-IN-THE-HAT-04\",\r\n        \"THE-CAT-IN-THE-HAT-05\",\r\n        \"THE-CAT-IN-THE-HAT-06\",\r\n        \"THE-CAT-IN-THE-HAT-07\",\r\n        \"THE-CAT-IN-THE-HAT-08\",\r\n        \"THE-CAT-IN-THE-HAT-09\",\r\n        \"THE-CAT-IN-THE-HAT-10\",\r\n        \"THE-CAT-IN-THE-HAT-11\",\r\n        \"THE-CAT-IN-THE-HAT-12\"\r\n    ];\r\n\r\n    { //helpers\r\n        //range slider fill\r\n        addGlobalEventListener(\"input\", \"input[type='range']\", e => {\r\n            e.target.style.setProperty(\"--range-progress\", ((e.target.value - e.target.min) / (e.target.max - e.target.min) * 100) + \"%\");\r\n        });\r\n        //range slider restrictions\r\n        addGlobalEventListener(\"change\", \"input[type='number']\", e => {\r\n            e.target.value = Math.min(Math.max(e.target.value, e.target.min), e.target.max);\r\n        });\r\n\r\n        //scroll container input\r\n        addGlobalEventListener(\"input\", \"*:is(.scroll-container-x, .scroll-container-y) input\", e => {\r\n            let scrollX = e.target.closest(\".scroll-container-x\");\r\n            let scrollY = e.target.closest(\".scroll-container-y\");\r\n\r\n            if (scrollX != null) {\r\n                scrollX.style.setProperty(\"overflow-x\", \"hidden\");\r\n            }\r\n            if (scrollY != null) {\r\n                scrollY.style.setProperty(\"overflow-y\", \"hidden\");\r\n            }\r\n\r\n            e.target.addEventListener(\"change\", e => {\r\n                if (scrollX != null) {\r\n                    scrollX.style.setProperty(\"overflow-x\", \"scroll\");\r\n                }\r\n                if (scrollY != null) {\r\n                    scrollY.style.setProperty(\"overflow-y\", \"scroll\");\r\n                }\r\n            }, {once: true});\r\n        });\r\n    }\r\n    \r\n    { //page\r\n        //navbar\r\n        document.querySelector(\"#navbar .toggle\").addEventListener(\"change\", () => {\r\n            document.querySelector(\"#navbar .right-navbar\").classList.toggle(\"-active\", document.querySelector(\"#navbar .toggle\").checked);\r\n        });\r\n\r\n        //book player page\r\n        // addGlobalEventListener(\"load\", \".book-player > .page > img\", e => {\r\n        // document.querySelectorAll(\".book-player > .page > img\").forEach((elem, i, arr) => {\r\n        //     console.log(\"img load\");\r\n        //     getMetaImg(elem.src, (width, height) => elem.style.setProperty(\"aspect-ratio\", width / height));\r\n        // });\r\n\r\n        //progress bar\r\n\r\n\r\n        { // data / interactivity\r\n            function updatePages(bookPlayer) {\r\n                //set internal custom propertes\r\n                bookPlayer.style.setProperty(\"--current-page\", Math.min(Math.max(parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--current-page\")), 1), parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--total-pages\")))); //clamp current page\r\n\r\n                //set page\r\n                bookPlayer.querySelector(\":scope > .page > img\").src = \"../books/The Cat in the Hat/\" + pages[parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--current-page\")) - 1] + \".png\";\r\n\r\n                //set slider\r\n                bookPlayer.querySelector(\".slider\").value = parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--current-page\"));\r\n                bookPlayer.querySelector(\".slider\").min = 1;\r\n                bookPlayer.querySelector(\".slider\").max = parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--total-pages\"));\r\n            /**/bookPlayer.querySelector(\".slider\").style.setProperty(\"--range-progress\", ((bookPlayer.querySelector(\".slider\").value - bookPlayer.querySelector(\".slider\").min) / (bookPlayer.querySelector(\".slider\").max - bookPlayer.querySelector(\".slider\").min) * 100) + \"%\");\r\n\r\n                //set point counter\r\n                bookPlayer.querySelector(\".point-counter .page\").value = parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--current-page\"));\r\n                bookPlayer.querySelector(\".point-counter .page\").min = 1;\r\n                bookPlayer.querySelector(\".point-counter .page\").max = parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--total-pages\"));\r\n                bookPlayer.querySelector(\".point-counter .max\").innerText = window.getComputedStyle(bookPlayer).getPropertyValue(\"--total-pages\");\r\n                bookPlayer.querySelector(\".point-counter\").style.setProperty(\"--comp-width\", bookPlayer.querySelector(\".point-counter\").offsetWidth + \"px\");\r\n            }\r\n            document.querySelectorAll(\".book-player\").forEach((elem, i, arr) => {\r\n                updatePages(elem);\r\n            });\r\n\r\n            //slider input\r\n            addGlobalEventListener(\"input\", \".book-player .slider\", e => {\r\n                e.target.closest(\".book-player\").style.setProperty(\"--current-page\", e.target.value);\r\n\r\n                updatePages(e.target.closest(\".book-player\"));\r\n            });\r\n            //slider change\r\n            addGlobalEventListener(\"change\", \".book-player .point-counter .page\", e => {\r\n                // console.log(e.target.value);\r\n                e.target.closest(\".book-player\").style.setProperty(\"--current-page\", e.target.value);\r\n\r\n                updatePages(e.target.closest(\".book-player\"));\r\n            });\r\n\r\n            //page turn click\r\n            document.addEventListener(\"pointerdown\", event => {\r\n                document.querySelectorAll(\".book-player .page-turn .zone\").forEach((elem, i, arr) => {\r\n                    if (mouseHover(elem, event)) {\r\n                        document.addEventListener(\"pointerup\", event => {\r\n                            if (elem.closest(\".page-turn\").classList.contains(\"next\")) {\r\n                                elem.closest(\".book-player\").style.setProperty(\"--current-page\", parseInt(window.getComputedStyle(elem.closest(\".book-player\")).getPropertyValue(\"--current-page\")) + 1);\r\n                            } else if (elem.closest(\".page-turn\").classList.contains(\"last\")) {\r\n                                elem.closest(\".book-player\").style.setProperty(\"--current-page\", parseInt(window.getComputedStyle(elem.closest(\".book-player\")).getPropertyValue(\"--current-page\")) - 1);\r\n                            }\r\n\r\n                            updatePages(elem.closest(\".book-player\"));\r\n                        }, {once: true});\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        { //styling\r\n            //progress near\r\n            document.addEventListener(\"mousemove\", event => {\r\n                document.querySelectorAll(\".book-player .progress .zone\").forEach((elem, i, arr) => {\r\n                    elem.closest(\".progress\").classList.toggle(\"-near\", mouseHover(elem, event));\r\n\r\n                    lift = setTimeout(() => {\r\n                        elem.closest(\".progress\").classList.toggle(\"-near\", false);\r\n                    }, 2000);\r\n\r\n                    document.addEventListener(\"mousemove\", event => {\r\n                        clearTimeout(lift);\r\n                    }, {once: true});\r\n                });\r\n            });\r\n            //progress hover\r\n            addGlobalEventListener(\"pointerover\", \".book-player .progress .slider\", e => {\r\n                e.target.closest(\".progress\").classList.add(\"-hover\");\r\n\r\n                e.target.addEventListener(\"pointerout\", e => {\r\n                    e.target.closest(\".progress\").classList.remove(\"-hover\");\r\n                }, {once: true});\r\n            });\r\n            //progress active\r\n            addGlobalEventListener(\"input\", \".book-player .progress .slider\", e => {\r\n                e.target.closest(\".progress\").classList.add(\"-active\");\r\n\r\n                e.target.addEventListener(\"change\", e => {\r\n                    e.target.closest(\".progress\").classList.remove(\"-active\");\r\n                }, {once: true});\r\n            });\r\n\r\n            //page turn hover\r\n            document.addEventListener(\"mousemove\", event => {\r\n                document.querySelectorAll(\".book-player .page-turn .zone\").forEach((elem, i, arr) => {\r\n                    elem.closest(\".page-turn\").classList.toggle(\"-hover\", mouseHover(elem, event));\r\n\r\n                    let lift = setTimeout(() => {\r\n                        elem.closest(\".page-turn\").classList.toggle(\"-hover\", false);\r\n                    }, 2000);\r\n\r\n                    document.addEventListener(\"mousemove\", event => {\r\n                        clearTimeout(lift);\r\n                    }, {once: true});\r\n                });\r\n            });\r\n\r\n            //page turn active\r\n            document.addEventListener(\"pointerdown\", event => {\r\n                document.querySelectorAll(\".book-player .page-turn .zone\").forEach((elem, i, arr) => {\r\n                    if (mouseHover(elem, event)) {\r\n                        elem.closest(\".page-turn\").classList.toggle(\"-active\", true);\r\n\r\n                        document.addEventListener(\"pointerup\", (event) => {\r\n                            elem.closest(\".page-turn\").classList.toggle(\"-active\", false);\r\n                        }, {once: true});\r\n                    }\r\n                });\r\n            });\r\n\r\n            //book info drawer\r\n            addGlobalEventListener(\"click\", \".book-player-info .info > .drawer\", e => {\r\n                e.target.closest(\".book-player-info\").classList.toggle(\"-expand\");\r\n            })\r\n        }\r\n    }\r\n});\r\n\r\nwindow.addEventListener(\"load\", e => {\r\n    console.log(\"window load\");\r\n\r\n    { //device accomodations\r\n        // window.addEventListener(\"resize\", event => {\r\n        //     document.querySelectorAll(\".book-player .progress\").forEach((elem) => {\r\n        //         elem.classList.toggle(\"-touch\", window.matchMedia(\"(hover: none)\").matches);\r\n        //     });\r\n        // });\r\n        // document.querySelectorAll(\".book-player .progress\").forEach((elem) => {\r\n        //     elem.classList.toggle(\"-touch\", window.matchMedia(\"(hover: none)\").matches);\r\n        // });\r\n    }\r\n});"]}