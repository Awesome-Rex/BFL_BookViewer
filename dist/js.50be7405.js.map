{"version":3,"sources":["js/index.js"],"names":["addGlobalEventListener","type","selector","callback","options","document","addEventListener","e","target","matches","startEventListener","startResize","window","screen","orientation","mouseHover","element","event","rect","getBoundingClientRect","clientX","left","right","clientY","top","bottom","overflowX","scrollWidth","clientWidth","overflowY","scrollHeight","clientHeight","overflow","getMetaImg","url","img","Image","src","onload","width","height","initial","console","log","innerWidth","documentElement","body","innerHeight","style","setProperty","querySelectorAll","forEach","elem","i","arr","closest","classList","toggle","querySelector","pages","value","min","max","Math","scrollX","scrollY","once","checked","updatePages","bookPlayer","parseInt","getComputedStyle","getPropertyValue","innerText","offsetWidth","contains","lift","setTimeout","clearTimeout","add","remove"],"mappings":";AAGA,SAASA,EAAuBC,EAAMC,EAAUC,EAAUC,GACtDC,SAASC,iBAAiBL,EAAM,SAAAM,GACxBA,EAAEC,OAAOC,QAAQP,IACjBC,EAASI,IAEdH,GAEP,SAASM,EAAmBT,EAAMC,EAAUC,EAAUC,GAClDC,SAASC,iBAAiB,mBAAoB,SAAAC,GAAKJ,OAAAA,EAASI,KAC5DP,EAAuBC,EAAMC,EAAU,SAAAK,GAAKJ,OAAAA,EAASI,IAAIH,GAE7D,SAASO,EAAYR,EAAUC,GAC3BC,SAASC,iBAAiB,mBAAoB,SAAAC,GAAKJ,OAAAA,EAASI,KAC5DK,OAAON,iBAAiB,SAAW,SAAAC,GAAKJ,OAAAA,EAASI,IAAIH,GACrDS,OAAOC,YAAYR,iBAAiB,SAAU,SAAAC,GAAKJ,OAAAA,EAASI,IAAIH,GAChDQ,OAAON,iBAAiB,oBAAqB,SAAAC,GAAKJ,OAAAA,EAASI,IAAIH,GAInF,SAASW,EAAWC,EAASC,GACrBC,IAAAA,EAAOF,EAAQG,wBAGfF,OAAAA,EAAMG,SAAWF,EAAKG,MAAQJ,EAAMG,SAAWF,EAAKI,OACpDL,EAAMM,SAAWL,EAAKM,KAAOP,EAAMM,SAAWL,EAAKO,OAI3D,SAASC,EAAUV,GACRA,OAAAA,EAAQW,YAAcX,EAAQY,YAEzC,SAASC,EAAUb,GACRA,OAAAA,EAAQc,aAAed,EAAQe,aAE1C,SAASC,EAAShB,GACPU,OAAAA,EAAUV,IAAYa,EAAUb,GAG3C,SAASiB,EAAWC,EAAK/B,GACfgC,IAAAA,EAAM,IAAIC,MAChBD,EAAIE,IAAMH,EACVC,EAAIG,OAAS,WAAanC,EAAS,KAAKoC,MAAO,KAAKC,SAMxDC,SACIC,QAAQC,IAAI,gBAIRhC,EAAY,SAAAJ,GACUK,OAAOgC,YAAcvC,SAASwC,gBAAgBjB,aAAevB,SAASyC,KAAKlB,YAC1EhB,OAAOmC,aAAe1C,SAASwC,gBAAgBd,cAAgB1B,SAASyC,KAAKf,aAEhG1B,SAASwC,gBAAgBG,MAAMC,YAAY,yBAA0BrC,OAAOmC,YAAc,QAI9F/C,EAAuB,OAAQ,cAAe,SAAAO,MAuB9CP,EAAuB,OAAQ,sBAAuB,SAAAO,WAMtDI,EAAY,SAAAJ,GACRF,SAAS6C,iBAAiB,qCAAqCC,QAAQ,SAACC,EAAMC,EAAGC,GAC7EF,EAAKG,QAAQ,qBAAqBC,UAAUC,OAAO,YAAa5B,EAAUuB,EAAKG,QAAQ,qBAAqBG,cAAc,0BAC1HN,EAAKG,QAAQ,qBAAqBP,MAAMC,YAAY,kBAAmBG,EAAKG,QAAQ,qBAAqBG,cAAc,wBAAwB5B,aAAe,WAM9KzB,SAASC,iBAAiB,mBAAoB,SAACW,GAC3CyB,QAAQC,IAAI,iBAQRgB,IAAAA,EAAQ,CACR,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,yBAKA3D,EAAuB,QAAS,sBAAuB,SAAAO,GACnDA,EAAEC,OAAOwC,MAAMC,YAAY,oBAAsB1C,EAAEC,OAAOoD,MAAQrD,EAAEC,OAAOqD,MAAQtD,EAAEC,OAAOsD,IAAMvD,EAAEC,OAAOqD,KAAO,IAAO,OAG7H7D,EAAuB,SAAU,uBAAwB,SAAAO,GACrDA,EAAEC,OAAOoD,MAAQG,KAAKF,IAAIE,KAAKD,IAAIvD,EAAEC,OAAOoD,MAAOrD,EAAEC,OAAOqD,KAAMtD,EAAEC,OAAOsD,OAI/E9D,EAAuB,QAAS,uDAAwD,SAAAO,GAChFyD,IAAAA,EAAUzD,EAAEC,OAAO+C,QAAQ,uBAC3BU,EAAU1D,EAAEC,OAAO+C,QAAQ,uBAEhB,MAAXS,GACAA,EAAQhB,MAAMC,YAAY,aAAc,UAE7B,MAAXgB,GACAA,EAAQjB,MAAMC,YAAY,aAAc,UAG5C1C,EAAEC,OAAOF,iBAAiB,SAAU,SAAAC,GACjB,MAAXyD,GACAA,EAAQhB,MAAMC,YAAY,aAAc,UAE7B,MAAXgB,GACAA,EAAQjB,MAAMC,YAAY,aAAc,WAE7C,CAACiB,MAAM,MAMd7D,SAASqD,cAAc,mBAAmBpD,iBAAiB,SAAU,WACjED,SAASqD,cAAc,yBAAyBF,UAAUC,OAAO,UAAWpD,SAASqD,cAAc,mBAAmBS,WAc7GC,IAAAA,EAAT,SAAqBC,GAEjBA,EAAWrB,MAAMC,YAAY,iBAAkBc,KAAKF,IAAIE,KAAKD,IAAIQ,SAAS1D,OAAO2D,iBAAiBF,GAAYG,iBAAiB,mBAAoB,GAAIF,SAAS1D,OAAO2D,iBAAiBF,GAAYG,iBAAiB,oBAGrNH,EAAWX,cAAc,wBAAwBrB,IAAM,wBAA0BsB,EAAMW,SAAS1D,OAAO2D,iBAAiBF,GAAYG,iBAAiB,mBAAqB,GAAK,OAI/KH,EAAWX,cAAc,WAAWE,MAAQU,SAAS1D,OAAO2D,iBAAiBF,GAAYG,iBAAiB,mBAC1GH,EAAWX,cAAc,WAAWG,IAAM,EAC1CQ,EAAWX,cAAc,WAAWI,IAAMQ,SAAS1D,OAAO2D,iBAAiBF,GAAYG,iBAAiB,kBACxGH,EAAWX,cAAc,WAAWV,MAAMC,YAAY,oBAAsBoB,EAAWX,cAAc,WAAWE,MAAQS,EAAWX,cAAc,WAAWG,MAAQQ,EAAWX,cAAc,WAAWI,IAAMO,EAAWX,cAAc,WAAWG,KAAO,IAAO,KAGhQQ,EAAWX,cAAc,wBAAwBE,MAAQU,SAAS1D,OAAO2D,iBAAiBF,GAAYG,iBAAiB,mBACvHH,EAAWX,cAAc,wBAAwBG,IAAM,EACvDQ,EAAWX,cAAc,wBAAwBI,IAAMQ,SAAS1D,OAAO2D,iBAAiBF,GAAYG,iBAAiB,kBACrHH,EAAWX,cAAc,uBAAuBe,UAAY7D,OAAO2D,iBAAiBF,GAAYG,iBAAiB,iBACjHH,EAAWX,cAAc,kBAAkBV,MAAMC,YAAY,eAAgBoB,EAAWX,cAAc,kBAAkBgB,YAAc,OAE1IrE,SAAS6C,iBAAiB,gBAAgBC,QAAQ,SAACC,EAAMC,EAAGC,GACxDc,EAAYhB,KAIhBpD,EAAuB,QAAS,uBAAwB,SAAAO,GACpDA,EAAEC,OAAO+C,QAAQ,gBAAgBP,MAAMC,YAAY,iBAAkB1C,EAAEC,OAAOoD,OAE9EQ,EAAY7D,EAAEC,OAAO+C,QAAQ,mBAGjCvD,EAAuB,SAAU,oCAAqC,SAAAO,GAElEA,EAAEC,OAAO+C,QAAQ,gBAAgBP,MAAMC,YAAY,iBAAkB1C,EAAEC,OAAOoD,OAE9EQ,EAAY7D,EAAEC,OAAO+C,QAAQ,mBAIjClD,SAASC,iBAAiB,cAAe,SAAAW,GACrCZ,SAAS6C,iBAAiB,iCAAiCC,QAAQ,SAACC,EAAMC,EAAGC,GACrEvC,EAAWqC,EAAMnC,IACjBZ,SAASC,iBAAiB,YAAa,SAAAW,GAC/BmC,EAAKG,QAAQ,cAAcC,UAAUmB,SAAS,QAC9CvB,EAAKG,QAAQ,gBAAgBP,MAAMC,YAAY,iBAAkBqB,SAAS1D,OAAO2D,iBAAiBnB,EAAKG,QAAQ,iBAAiBiB,iBAAiB,mBAAqB,GAC/JpB,EAAKG,QAAQ,cAAcC,UAAUmB,SAAS,SACrDvB,EAAKG,QAAQ,gBAAgBP,MAAMC,YAAY,iBAAkBqB,SAAS1D,OAAO2D,iBAAiBnB,EAAKG,QAAQ,iBAAiBiB,iBAAiB,mBAAqB,GAG1KJ,EAAYhB,EAAKG,QAAQ,kBAC1B,CAACW,MAAM,QAOtB7D,SAASC,iBAAiB,YAAa,SAAAW,GACnCZ,SAAS6C,iBAAiB,gCAAgCC,QAAQ,SAACC,EAAMC,EAAGC,GACxEF,EAAKG,QAAQ,aAAaC,UAAUC,OAAO,QAAS1C,EAAWqC,EAAMnC,IAErE2D,KAAOC,WAAW,WACdzB,EAAKG,QAAQ,aAAaC,UAAUC,OAAO,SAAS,IACrD,KAEHpD,SAASC,iBAAiB,YAAa,SAAAW,GACnC6D,aAAaF,OACd,CAACV,MAAM,QAIlBlE,EAAuB,cAAe,iCAAkC,SAAAO,GACpEA,EAAEC,OAAO+C,QAAQ,aAAaC,UAAUuB,IAAI,UAE5CxE,EAAEC,OAAOF,iBAAiB,aAAc,SAAAC,GACpCA,EAAEC,OAAO+C,QAAQ,aAAaC,UAAUwB,OAAO,WAChD,CAACd,MAAM,MAGdlE,EAAuB,QAAS,iCAAkC,SAAAO,GAC9DA,EAAEC,OAAO+C,QAAQ,aAAaC,UAAUuB,IAAI,WAE5CxE,EAAEC,OAAOF,iBAAiB,SAAU,SAAAC,GAChCA,EAAEC,OAAO+C,QAAQ,aAAaC,UAAUwB,OAAO,YAChD,CAACd,MAAM,MAId7D,SAASC,iBAAiB,YAAa,SAAAW,GACnCZ,SAAS6C,iBAAiB,iCAAiCC,QAAQ,SAACC,EAAMC,EAAGC,GACzEF,EAAKG,QAAQ,cAAcC,UAAUC,OAAO,SAAU1C,EAAWqC,EAAMnC,IAEnE2D,IAAAA,EAAOC,WAAW,WAClBzB,EAAKG,QAAQ,cAAcC,UAAUC,OAAO,UAAU,IACvD,KAEHpD,SAASC,iBAAiB,YAAa,SAAAW,GACnC6D,aAAaF,IACd,CAACV,MAAM,QAKlB7D,SAASC,iBAAiB,cAAe,SAAAW,GACrCZ,SAAS6C,iBAAiB,iCAAiCC,QAAQ,SAACC,EAAMC,EAAGC,GACrEvC,EAAWqC,EAAMnC,KACjBmC,EAAKG,QAAQ,cAAcC,UAAUC,OAAO,WAAW,GAEvDpD,SAASC,iBAAiB,YAAa,SAACW,GACpCmC,EAAKG,QAAQ,cAAcC,UAAUC,OAAO,WAAW,IACxD,CAACS,MAAM,SAMtBlE,EAAuB,QAAS,oCAAqC,SAAAO,GACjEA,EAAEC,OAAO+C,QAAQ,qBAAqBC,UAAUC,OAAO,eAMvE7C,OAAON,iBAAiB,OAAQ,SAAAC,GAC5BmC,QAAQC,IAAI","file":"js.50be7405.js","sourceRoot":"..\\src","sourcesContent":["// import pages from \"../books/The Cat in the Hat/*.png\"; \r\n// import pages from \"../../books\";\r\n\r\nfunction addGlobalEventListener(type, selector, callback, options) {\r\n    document.addEventListener(type, e => {\r\n        if (e.target.matches(selector)) {\r\n            callback(e);\r\n        }\r\n    }, options);\r\n}\r\nfunction startEventListener(type, selector, callback, options){\r\n    document.addEventListener(\"DOMContentLoaded\", e => callback(e));\r\n    addGlobalEventListener(type, selector, e => callback(e), options);\r\n}\r\nfunction startResize(callback, options) {\r\n    document.addEventListener(\"DOMContentLoaded\", e => callback(e));\r\n    window.addEventListener(\"resize\",  e => callback(e), options);\r\n    screen.orientation.addEventListener(\"change\", e => callback(e), options);\r\n    /* deprecated */window.addEventListener(\"orientationchange\", e => callback(e), options);\r\n    // window.orientation.addEventListener(\"change\", e => callback(e), options);\r\n}\r\n\r\nfunction mouseHover(element, event){\r\n    let rect = element.getBoundingClientRect();\r\n\r\n    return (\r\n        event.clientX >= rect.left && event.clientX <= rect.right &&\r\n        event.clientY >= rect.top && event.clientY <= rect.bottom\r\n    );\r\n}\r\n\r\nfunction overflowX(element) {\r\n    return element.scrollWidth > element.clientWidth;\r\n}\r\nfunction overflowY(element) {\r\n    return element.scrollHeight > element.clientHeight;\r\n}\r\nfunction overflow(element) {\r\n    return overflowX(element) || overflowY(element);\r\n}\r\n\r\nfunction getMetaImg(url, callback) {\r\n    const img = new Image();\r\n    img.src = url;\r\n    img.onload = function() { callback(this.width, this.height); }\r\n}\r\n// getMetaImg(\"http://snook.ca/files/mootools_83_snookca.png\", (width, height) => { alert(width + 'px ' + height + 'px') });\r\n\r\n\r\n\r\ninitial = (() => {\r\n    console.log(\"initial load\");\r\n\r\n    { //helpers\r\n        //window size (excluding mobile toolbar)\r\n        startResize(e => {\r\n            var windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\r\n            var windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\r\n\r\n            document.documentElement.style.setProperty(\"--viewport-height-fill\", window.innerHeight + \"px\");\r\n        });\r\n\r\n        //min/max area\r\n        addGlobalEventListener(\"load\", \".-live-area\", e => {\r\n            // boxes.forEach(box => {\r\n            //     new ResizeObserver(entries => {\r\n            //         const width = Math.floor(entries[0].contentRect.width);\r\n            //         const height = Math.floor(entries[0].contentRect.height);\r\n            //         entries[0].target.value = `I'm ${width}px and ${height}px tall`;\r\n            //     }).observe(box);\r\n            // });\r\n        });\r\n\r\n        // areaObserver = new ResizeObserver(entries => {\r\n\r\n        // });\r\n        // areaObserver.observe()\r\n        // window.addEventListener('storage', e => {\r\n        //     console.log(\"storage\");\r\n\r\n        //     document.querySelectorAll(\".-live-area\").forEach((area, index, array) => {\r\n\r\n        //     });\r\n        // });\r\n\r\n        //range update fill\r\n        addGlobalEventListener(\"load\", \"input[type='range']\", e => {\r\n\r\n        });\r\n    }\r\n    { //page\r\n        //book info drawer layout\r\n        startResize(e => {\r\n            document.querySelectorAll(\".book-player-info .info > .drawer\").forEach((elem, i, arr) => {\r\n                elem.closest(\".book-player-info\").classList.toggle(\"-overflow\", overflowY(elem.closest(\".book-player-info\").querySelector(\".info > .description\")));\r\n                elem.closest(\".book-player-info\").style.setProperty(\"--min-info-desc\", elem.closest(\".book-player-info\").querySelector(\".info > .description\").scrollHeight + \"px\");\r\n            });\r\n        });\r\n    }\r\n})();\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", (event) => {\r\n    console.log(\"document load\");\r\n\r\n    // elem = document.createElement(\"span\");\r\n    // elem.classList.add(\"-live-area\");\r\n    // elem.innerText = \"new\";\r\n    // document.querySelector(\"body\").append(elem);\r\n\r\n\r\n    let pages = [\r\n        \"THE-CAT-IN-THE-HAT-03\",\r\n        \"THE-CAT-IN-THE-HAT-04\",\r\n        \"THE-CAT-IN-THE-HAT-05\",\r\n        \"THE-CAT-IN-THE-HAT-06\",\r\n        \"THE-CAT-IN-THE-HAT-07\",\r\n        \"THE-CAT-IN-THE-HAT-08\",\r\n        \"THE-CAT-IN-THE-HAT-09\",\r\n        \"THE-CAT-IN-THE-HAT-10\",\r\n        \"THE-CAT-IN-THE-HAT-11\",\r\n        \"THE-CAT-IN-THE-HAT-12\"\r\n    ];\r\n\r\n    { //helpers\r\n        //range slider fill\r\n        addGlobalEventListener(\"input\", \"input[type='range']\", e => {\r\n            e.target.style.setProperty(\"--range-progress\", ((e.target.value - e.target.min) / (e.target.max - e.target.min) * 100) + \"%\");\r\n        });\r\n        //range slider restrictions\r\n        addGlobalEventListener(\"change\", \"input[type='number']\", e => {\r\n            e.target.value = Math.min(Math.max(e.target.value, e.target.min), e.target.max);\r\n        });\r\n\r\n        //scroll container input\r\n        addGlobalEventListener(\"input\", \"*:is(.scroll-container-x, .scroll-container-y) input\", e => {\r\n            let scrollX = e.target.closest(\".scroll-container-x\");\r\n            let scrollY = e.target.closest(\".scroll-container-y\");\r\n\r\n            if (scrollX != null) {\r\n                scrollX.style.setProperty(\"overflow-x\", \"hidden\");\r\n            }\r\n            if (scrollY != null) {\r\n                scrollY.style.setProperty(\"overflow-y\", \"hidden\");\r\n            }\r\n\r\n            e.target.addEventListener(\"change\", e => {\r\n                if (scrollX != null) {\r\n                    scrollX.style.setProperty(\"overflow-x\", \"scroll\");\r\n                }\r\n                if (scrollY != null) {\r\n                    scrollY.style.setProperty(\"overflow-y\", \"scroll\");\r\n                }\r\n            }, {once: true});\r\n        });\r\n    }\r\n    \r\n    { //page\r\n        //navbar\r\n        document.querySelector(\"#navbar .toggle\").addEventListener(\"change\", () => {\r\n            document.querySelector(\"#navbar .right-navbar\").classList.toggle(\"-active\", document.querySelector(\"#navbar .toggle\").checked);\r\n        });\r\n\r\n        //book player page\r\n        // addGlobalEventListener(\"load\", \".book-player > .page > img\", e => {\r\n        // document.querySelectorAll(\".book-player > .page > img\").forEach((elem, i, arr) => {\r\n        //     console.log(\"img load\");\r\n        //     getMetaImg(elem.src, (width, height) => elem.style.setProperty(\"aspect-ratio\", width / height));\r\n        // });\r\n\r\n        //progress bar\r\n\r\n\r\n        { // data / interactivity\r\n            function updatePages(bookPlayer) {\r\n                //set internal custom propertes\r\n                bookPlayer.style.setProperty(\"--current-page\", Math.min(Math.max(parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--current-page\")), 1), parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--total-pages\")))); //clamp current page\r\n\r\n                //set page\r\n                bookPlayer.querySelector(\":scope > .page > img\").src = \"./The Cat in the Hat/\" + pages[parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--current-page\")) - 1] + \".png\";\r\n                // bookPlayer.querySelector(\":scope > .page > img\").src = \"../books/The Cat in the Hat/\" + pages[parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--current-page\")) - 1] + \".png\";\r\n\r\n                //set slider\r\n                bookPlayer.querySelector(\".slider\").value = parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--current-page\"));\r\n                bookPlayer.querySelector(\".slider\").min = 1;\r\n                bookPlayer.querySelector(\".slider\").max = parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--total-pages\"));\r\n            /**/bookPlayer.querySelector(\".slider\").style.setProperty(\"--range-progress\", ((bookPlayer.querySelector(\".slider\").value - bookPlayer.querySelector(\".slider\").min) / (bookPlayer.querySelector(\".slider\").max - bookPlayer.querySelector(\".slider\").min) * 100) + \"%\");\r\n\r\n                //set point counter\r\n                bookPlayer.querySelector(\".point-counter .page\").value = parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--current-page\"));\r\n                bookPlayer.querySelector(\".point-counter .page\").min = 1;\r\n                bookPlayer.querySelector(\".point-counter .page\").max = parseInt(window.getComputedStyle(bookPlayer).getPropertyValue(\"--total-pages\"));\r\n                bookPlayer.querySelector(\".point-counter .max\").innerText = window.getComputedStyle(bookPlayer).getPropertyValue(\"--total-pages\");\r\n                bookPlayer.querySelector(\".point-counter\").style.setProperty(\"--comp-width\", bookPlayer.querySelector(\".point-counter\").offsetWidth + \"px\");\r\n            }\r\n            document.querySelectorAll(\".book-player\").forEach((elem, i, arr) => {\r\n                updatePages(elem);\r\n            });\r\n\r\n            //slider input\r\n            addGlobalEventListener(\"input\", \".book-player .slider\", e => {\r\n                e.target.closest(\".book-player\").style.setProperty(\"--current-page\", e.target.value);\r\n\r\n                updatePages(e.target.closest(\".book-player\"));\r\n            });\r\n            //slider change\r\n            addGlobalEventListener(\"change\", \".book-player .point-counter .page\", e => {\r\n                // console.log(e.target.value);\r\n                e.target.closest(\".book-player\").style.setProperty(\"--current-page\", e.target.value);\r\n\r\n                updatePages(e.target.closest(\".book-player\"));\r\n            });\r\n\r\n            //page turn click\r\n            document.addEventListener(\"pointerdown\", event => {\r\n                document.querySelectorAll(\".book-player .page-turn .zone\").forEach((elem, i, arr) => {\r\n                    if (mouseHover(elem, event)) {\r\n                        document.addEventListener(\"pointerup\", event => {\r\n                            if (elem.closest(\".page-turn\").classList.contains(\"next\")) {\r\n                                elem.closest(\".book-player\").style.setProperty(\"--current-page\", parseInt(window.getComputedStyle(elem.closest(\".book-player\")).getPropertyValue(\"--current-page\")) + 1);\r\n                            } else if (elem.closest(\".page-turn\").classList.contains(\"last\")) {\r\n                                elem.closest(\".book-player\").style.setProperty(\"--current-page\", parseInt(window.getComputedStyle(elem.closest(\".book-player\")).getPropertyValue(\"--current-page\")) - 1);\r\n                            }\r\n\r\n                            updatePages(elem.closest(\".book-player\"));\r\n                        }, {once: true});\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        { //styling\r\n            //progress near\r\n            document.addEventListener(\"mousemove\", event => {\r\n                document.querySelectorAll(\".book-player .progress .zone\").forEach((elem, i, arr) => {\r\n                    elem.closest(\".progress\").classList.toggle(\"-near\", mouseHover(elem, event));\r\n\r\n                    lift = setTimeout(() => {\r\n                        elem.closest(\".progress\").classList.toggle(\"-near\", false);\r\n                    }, 2000);\r\n\r\n                    document.addEventListener(\"mousemove\", event => {\r\n                        clearTimeout(lift);\r\n                    }, {once: true});\r\n                });\r\n            });\r\n            //progress hover\r\n            addGlobalEventListener(\"pointerover\", \".book-player .progress .slider\", e => {\r\n                e.target.closest(\".progress\").classList.add(\"-hover\");\r\n\r\n                e.target.addEventListener(\"pointerout\", e => {\r\n                    e.target.closest(\".progress\").classList.remove(\"-hover\");\r\n                }, {once: true});\r\n            });\r\n            //progress active\r\n            addGlobalEventListener(\"input\", \".book-player .progress .slider\", e => {\r\n                e.target.closest(\".progress\").classList.add(\"-active\");\r\n\r\n                e.target.addEventListener(\"change\", e => {\r\n                    e.target.closest(\".progress\").classList.remove(\"-active\");\r\n                }, {once: true});\r\n            });\r\n\r\n            //page turn hover\r\n            document.addEventListener(\"mousemove\", event => {\r\n                document.querySelectorAll(\".book-player .page-turn .zone\").forEach((elem, i, arr) => {\r\n                    elem.closest(\".page-turn\").classList.toggle(\"-hover\", mouseHover(elem, event));\r\n\r\n                    let lift = setTimeout(() => {\r\n                        elem.closest(\".page-turn\").classList.toggle(\"-hover\", false);\r\n                    }, 2000);\r\n\r\n                    document.addEventListener(\"mousemove\", event => {\r\n                        clearTimeout(lift);\r\n                    }, {once: true});\r\n                });\r\n            });\r\n\r\n            //page turn active\r\n            document.addEventListener(\"pointerdown\", event => {\r\n                document.querySelectorAll(\".book-player .page-turn .zone\").forEach((elem, i, arr) => {\r\n                    if (mouseHover(elem, event)) {\r\n                        elem.closest(\".page-turn\").classList.toggle(\"-active\", true);\r\n\r\n                        document.addEventListener(\"pointerup\", (event) => {\r\n                            elem.closest(\".page-turn\").classList.toggle(\"-active\", false);\r\n                        }, {once: true});\r\n                    }\r\n                });\r\n            });\r\n\r\n            //book info drawer\r\n            addGlobalEventListener(\"click\", \".book-player-info .info > .drawer\", e => {\r\n                e.target.closest(\".book-player-info\").classList.toggle(\"-expand\");\r\n            })\r\n        }\r\n    }\r\n});\r\n\r\nwindow.addEventListener(\"load\", e => {\r\n    console.log(\"window load\");\r\n\r\n    { //device accomodations\r\n        // window.addEventListener(\"resize\", event => {\r\n        //     document.querySelectorAll(\".book-player .progress\").forEach((elem) => {\r\n        //         elem.classList.toggle(\"-touch\", window.matchMedia(\"(hover: none)\").matches);\r\n        //     });\r\n        // });\r\n        // document.querySelectorAll(\".book-player .progress\").forEach((elem) => {\r\n        //     elem.classList.toggle(\"-touch\", window.matchMedia(\"(hover: none)\").matches);\r\n        // });\r\n    }\r\n});"]}