/*FONTS*/
@import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');
// @use "./";
// @import "./";
@import "breakpoints";

/*VARIABLES*/

* {
    /*styling*/
    --bfl-purple: #573164;
    --bfl-gold: #d4af37;
    --bfl-white: #ffffff;
    --bfl-black: #000000;
    --bfl-grey:#f3f0f0;
    /* --bfl-grey:#e2e2e2; */

    --line-width: 2px;

    --drop-out: 1px 1px 12px rgb(0, 0, 0, 0.5);
    --drop-in: inset 0 0 12px rgb(0, 0, 0, 0.5);
}
* {
    /*layout*/
    --navbar-height: 10em;

    --max-media-width:32cm;
    --max-info-width:34cm;
    --max-article-width:24cm;
}

/*STYLING GENERIC*/

* {
    font-family: "Roboto";
    /* font-family: serif; */
    /* font-family:'Times New Roman'; */
}

body {
    margin: 0;
}

h1, h2, h3, h4, h5, h6 {
    color: var(--bfl-gold);
    font-weight: bold;
}

a {
    color: var(--bfl-gold);
}

hr {
    border-width: calc(var(--line-width) / 2);
}

.page-banner {
    position: relative;

    padding: 1em;

    // @include drop-out();
}

.page-banner > div {
    width: 100%;
    max-width: var(--max-info-width);
    margin: auto;
}

.white-link {
    color: var(--bfl-white);
    text-decoration: none;
}

.white-link:hover {
    color: var(--bfl-grey);
}

.book-player {
    
    /*layout*/

    --progress-zone-top: 4em;
    --progress-zone-bottom: 2em;

    --progress-area-height: 30%;

    --progress-min: var(--line-width);
    --progress-near: 4px;
    --progress-max: 8px;

    --point-min: var(--progress-min);
    --point-near: 10px;
    --point-most: 16px;
    --point-max: 22px;


    --page-zone-width: 25%;

    --page-area-width: 14em;

    --page-arrow-distance: 36px;

    /*styling*/

    --major: var(var(--bfl-purple));

    --area: #00000022;
    --area-anim: opacity 100ms linear;

    --page-turn: #00000011;

    /*data*/
    --page-per-view: 2;

    --total-pages: 10;
    --current-page: 1;
    --progress: calc(var(--current-page) / var(--total-pages)) * 100%;
}

/*STYLING INVERT*/

.bfl-invert {
    color: white;
    background-color: var(--bfl-purple);
}

.bfl-invert h1,
.bfl-invert h2,
.bfl-invert h3,
.bfl-invert h4,
.bfl-invert h5,
.bfl-invert h6 {
    color: white;
}

/*STYLING SHADOW*/

@mixin drop-out($img: false) {
    @if $img == false {
        box-shadow: var(--drop-out);
    } @else if $img == true {
        filter:drop-shadow(var(--drop-out));
    }
}

@mixin drop-in($img: false) {
    @if $img == false {
        box-shadow: var(--drop-in);
    } @else if $img == true {
        box-shadow: var(--drop-in);
    }
}

/*STYLING NAVBAR*/

header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;

    border: var(--line-width) solid var(--bfl-grey);
    /* width: 100%; */
    padding:1em;

    background-color: var(--bfl-white);
    @include drop-out();

    z-index: 1;
}

#navbar-logo {
    cursor: pointer;

    margin:auto 2em;
    height: var(--navbar-height);
}

header nav {
    // display: flex;
}

header .right-navbar {
    flex-shrink: 1;
    flex-grow: 1;
    flex-basis: 140px;
}

header .right-navbar .content {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;

    float: right;
}

header .right-navbar .content > * {
    display: inline-block;
    flex-shrink: 0;

    margin: auto 0.5em;
}

header .right-navbar .content > *, header .right-navbar .content > * > h2 {
    color: var(--bfl-purple);
    text-decoration: none;
}
header .right-navbar .content > *:hover, header .right-navbar .content > *:hover > h2 {
    color: var(--bfl-gold);
    text-decoration: underline;
}

#content {
    /* height: 100%; */
}

/*STYLING BOOK VIEWER*/

.book-player {
    cursor: crosshair;

    position: relative;

    margin: 1cm auto;
    max-width: var(--max-media-width);
    /* max-height:; */

    // box-shadow: var(--drop-out);
    @include drop-out();

    & > .page {
        

        &, & * {
            
        }

        & > img {
            width: 100%;
        }
    }

    .progress-zone {
        position: absolute;
    
        bottom: calc(var(--progress-zone-bottom) * -1);
    
        width: 100%;
        height: calc(var(--progress-zone-top) + var(--progress-zone-bottom));
    
        z-index: 1;

        > div {
            position: absolute;
        
            bottom: calc(var(--progress-zone-bottom) * 1);
        
            height: 0;
            width: 100%;
        }

        & ~ .progress-area {
            pointer-events: none;
        
            position: absolute;
        
            bottom: 0;
        
            width: 100%;
            height: var(--progress-area-height);
        
            background-image: linear-gradient(to top, var(--area), transparent);
        
            opacity: 0;
        
            z-index: auto;
        
            transition: var(--area-anim);
        }

        &:hover ~ .progress-area {
            opacity: 1;
        }
    }
}

.book-player .progress {
    cursor: pointer;

    appearance: none;

    position: absolute;

    bottom: calc(var(--progress-min) / -2);
    
    margin: 0;
    width: 100%;
    height: var(--progress-max);
    
    outline: none;
    background-color: transparent;
    
    transform: translateY(50%);

    z-index: 2;
}

.book-player .progress ~ .fill {
    user-select: none;

    position: absolute;

    bottom: calc(var(--progress-min) / -2);
    
    margin: 0;
    border-bottom-left-radius: 1vh;
    // border-bottom-right-radius: 1vh;
    width: var(--progress);
    height: var(--progress-min);
    
    background-color: var(--bfl-purple);

    transform: translateY(50%);

    z-index: 1;

    transition: height 30ms ease-in-out;

    @at-root .book-player .progress-zone:hover .progress ~ .fill {
        height: var(--progress-near);

        transition: width 40ms ease-in-out;
    }

    @at-root .book-player .progress-zone:hover .progress:hover ~.fill {
        height: var(--progress-max);
    }
}

.book-player .progress::-webkit-slider-thumb {
    appearance: none;

    width: var(--point-min);
    height: var(--point-min);

    border-radius: 100%;
    background-color: var(--bfl-purple);
    @include drop-out; 

    transition: width 30ms linear, height 30ms linear;

    @at-root .book-player .progress-zone:hover .progress::-webkit-slider-thumb {
        width: var(--point-near);
        height: var(--point-near);
    
        transition: width 30ms ease-in-out, height 30ms ease-in-out;
    }

    @at-root .book-player .progress-zone:hover .progress:hover::-webkit-slider-thumb {
        width: var(--point-most);
        height: var(--point-most);
    
        transition: width 40ms linear, height 40ms linear;
    }

    @at-root .book-player progress-zone:hover .progress:hover::-webkit-slider-thumb:hover {
        width: var(--point-max);
        height: var(--point-max);
    }

    @at-root .book-player progress-zone:hover .progress::-webkit-slider-thumb:active {
        width: var(--point-max);
        height: var(--point-max);
    }
}

/*STYLING PAGE BUTTONS*/

.book-player .page-zone {
    position: absolute;

    top: 0;

    width: var(--page-zone-width);
    height: 100%;

    z-index: 1;
}

.book-player .arrow {
    user-select: none;

    position: absolute;

    top: 50%;

    width: 20px;
    
    filter: drop-shadow(var(--drop-out));
    opacity: 0;

    transform: translateY(-50%);

    transition: opacity 80ms linear, left 120ms ease, right  120ms ease;
}

.book-player .page-area {
    pointer-events: none;

    display: block;
    position: absolute;

    top:0;

    width: var(--page-area-width);
    height: 100%;

    opacity: 0;

    transition: var(--area-anim);
}

.book-player .page-active {
    pointer-events: none;

    position: absolute;

    top:0;

    width: calc(100% / var(--page-per-view));
    height: 100%;

    background-color: transparent;
}

.book-player .page-zone:hover {
    cursor: pointer;
}

.book-player .page-zone:hover .arrow {
    opacity: 0.5;

    transition: opacity 60ms linear, left 120ms ease, right  120ms ease;
}

.book-player .page-zone:hover + .page-area {
    opacity: 1;

    transition: none;
}

.book-player .page-zone:hover:active .arrow {
    opacity: 1;
}

.book-player .page-zone:hover:active + .page-area {
    // opacity: 0.1;
    opacity: 0;
}

.book-player .page-zone:hover:active + .page-area + .page-active {
    // background-color: var(--page-turn);
}

/*STYLING SPECIFIC PAGE BUTTONS*/

.book-player .page-zone.next {
    right: 0;
}

.book-player .arrow.next {
    right: 0;
}

.book-player .page-area.next {
    right: 0;

    background-image: linear-gradient(to left, var(--area), transparent);
}

.book-player .page-active.next {
    right: 0;
}

// .book-player .page-zone.next:hover:active + .page-area.next {
//     left: 50%;

//     background-image: linear-gradient(to right, var(--area), transparent);
// }

.book-player .page-zone.next:hover .arrow.next {
    right: var(--page-arrow-distance);
}

.book-player .page-zone.next:hover:active + .page-area.next + .page-active.next {
    background-image: linear-gradient(to right, var(--page-turn), transparent);
}

.book-player .page-zone.last {
    left: 0;
}

.book-player .arrow.last {
    left: 0;

    transform: translateY(-50%) scaleX(-1);
}

.book-player .page-area.last {
    left: 0;

    background-image: linear-gradient(to right, var(--area), transparent);
}

.book-player .page-active.last {
    left: 0;
}

// .book-player .page-zone.last:hover:active + .page-area.last {
//     right: 50%;

//     background-image: linear-gradient(to left, var(--area), transparent);
// }

.book-player .page-zone.last:hover .arrow.last {
    left: var(--page-arrow-distance);
}

.book-player .page-zone.last:hover:active + .page-area.last + .page-active.last {
    background-image: linear-gradient(to left, var(--page-turn), transparent);
}

/*STYLING BOOK INFO*/

.book-info {
    padding: 2em 1em;

    @include drop-out();

    z-index: 1;
}

.book-info .content {
    display: flex;
    flex-wrap: wrap;

    justify-content:space-between;

    gap: 1em;
}

.book-info .cover {
    flex-shrink: 1;

    // margin-right: 1em;
    // margin-bottom: 1em;
}

.book-info .cover img {
    display: inline-block;
    vertical-align: top;

    /* height: 16em; */
    height: 6cm;

    // box-shadow: var(--drop-out);
    @include drop-out(true);
}

.book-info .info {
    flex-grow: 1;
    flex-shrink: 0;
    flex-basis: 300px;

    // padding: 0 1em;
}

.book-info .title {
    margin: 0 auto;

    text-decoration: none;
}

.book-info .title > * {
    margin: 0 auto;
}

.book-info .title + hr {
    color: var(--bfl-white);
}

.book-info .tags {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
}

.book-info .author {
    flex-shrink: 0;

    color: var(--bfl-white);
    font-weight: bold;
    text-decoration: none;
}

.book-info .date {
    flex-shrink: 0;

    font-weight: bold;
}

/* .book-info .tags > hr {
    display: block;
    flex-grow: 1;
    flex-shrink: 1;

    margin: auto 1em;
} */

.book-info .description {
    margin-block-end: 0;
    width: calc(100% - 1em);
    /* width: calc(100% - 4em); */
}

.reader-info {
    padding: 1em 1em;

    background-color: var(--bfl-grey);
    // background-color: var(--bfl-gold);
    @include drop-out();
}

.reader-info .content {
    display: flex;
    flex-wrap: wrap;

    // max-width: calc(var(--max-info-width) - 2cm);

    justify-content:space-between;

    gap: 1em;
}

.reader-info .profile {
    display: flex;
    justify-content:space-between;

    // margin-right: 1em;
    // margin-bottom: 1em;
}

.reader-info .profile {
    flex-shrink: 1;
}

.reader-info .profile img {
    display: inline-block;
    vertical-align: top;

    height: 2cm;

    // box-shadow: var(--drop-out);
    @include drop-out(true);

    // border-radius: 100%;
}

.reader-info .info {
    flex-grow: 1;
    flex-shrink: 0;
    flex-basis: 300px;

    // padding: 0 1em;
}

.reader-info .tags {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;

    flex-wrap: wrap;
}

.reader-info .name {
    flex-shrink: 0;

    margin: 0 0;

    text-decoration: none;
}

.reader-info .name > * {
    margin: 0 0;

    color: var(--bfl-black);
}

.reader-info .date {
    flex-shrink: 0;

    font-weight: bold;
}

.reader-info hr {
    color: var(--bfl-white);
}

.book-info .description {
    /* margin:0; */
    width: calc(100% - 1em);
}